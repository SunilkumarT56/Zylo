generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model oauth_accounts {
  id               String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String    @db.Uuid
  provider         String    @db.VarChar(50)
  provider_user_id String    @db.VarChar(255)
  access_token     String?
  refresh_token    String?
  expires_at       DateTime? @db.Timestamptz(6)
  scope            String?
  created_at       DateTime  @default(now()) @db.Timestamptz(6)
  updated_at       DateTime  @updatedAt @db.Timestamptz(6)
  user             users     @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@unique([provider, provider_user_id], map: "uq_provider_user")
  @@index([user_id])
}

model github_profiles {
  id                  String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id             String   @unique @db.Uuid
  login               String
  github_id           Int      @unique
  avatar_url          String
  gravatar_id         String?
  html_url            String
  repos_url           String
  organizations_url   String
  events_url          String
  received_events_url String
  name                String?
  company             String?
  blog                String?
  location            String?
  bio                 String?
  twitter_username    String?
  hireable            Boolean?
  site_admin          Boolean
  public_repos        Int
  public_gists        Int
  followers           Int
  following           Int
  created_at_github   DateTime
  updated_at_github   DateTime
  emails              Json
  created_at          DateTime @default(now())
  updated_at          DateTime @updatedAt
  user                users    @relation(fields: [user_id], references: [id], onDelete: Cascade)
}

model users {
  id             String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email          String?          @unique
  avatar_url     String?
  created_at     DateTime         @default(now())
  updated_at     DateTime         @updatedAt
  github_profile github_profiles?
  oauth_accounts oauth_accounts[]
}
